@using KDP_EC.Core.ModelView
@model List<FarmInfoViewModel>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>

<div class="container-fluid main-content">

    <script async
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBg-klH9J1Clp3Pya04AHO4Tg5hPPcSHMk&callback=initMap">
    </script>

    <div class="row">
        
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header text-white text-center"
                     style="background-color: #218c5d; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                    <h5 class="mb-0">Ubicacion de la Finca</h5>
                </div>
                <div class="p-3">
                    <div id="map" style="height: 300px; width: 100%;" class="my-2 rounded"></div>
                </div>
            </div>
        </div>


        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header text-white text-center"
                     style="background-color: #218c5d; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                    <h5 class="mb-0">Indicadores</h5>
                </div>
                <div class="card-body">
                    <div class="row g-2">

                        <div class="col-6">
                            <div class="card shadow-sm d-flex flex-row align-items-center">
                                <div class="bg-success d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <i class="bi bi-tree-fill text-white fs-4"></i>
                                </div>
                                <div class="p-2">
                                    <h6 class="text-muted mb-0 small">Fincas Registradas</h6>
                                    <h5 class="fw-bold mb-0">@ViewBag.TotalFincas</h5>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="card shadow-sm d-flex flex-row align-items-center">
                                <div class="bg-primary d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <i class="bi bi-graph-up-arrow text-white fs-4"></i>
                                </div>
                                <div class="p-2">
                                    <h6 class="text-muted mb-0 small">Ha Totales</h6>
                                    <h5 class="fw-bold mb-0">@ViewBag.HaTotales</h5>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="card shadow-sm d-flex flex-row align-items-center">
                                <div class="bg-primary d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <i class="bi bi-graph-up-arrow text-white fs-4"></i>
                                </div>
                                <div class="p-2">
                                    <h6 class="text-muted mb-0 small">Ha Productivas</h6>
                                    <h5 class="fw-bold mb-0">@ViewBag.HaTotales</h5>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="card shadow-sm d-flex flex-row align-items-center">
                                <div class="bg-primary d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <i class="bi bi-graph-up-arrow text-white fs-4"></i>
                                </div>
                                <div class="p-2">
                                    <h6 class="text-muted mb-0 small">Ha en levante</h6>
                                    <h5 class="fw-bold mb-0">@ViewBag.HaTotales</h5>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

            
            <div class="custom-background">
                <div class="card-body">
            <div class="card-header text-white text-center"
                 style="background-color: #218c5d; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <h5 class="mb-0">Fincas</h5>
            </div>

                    <div class="table-responsive">
                        <table class="table table-bordered text-center">
                            <thead class="table-light">
                                <tr>
                                    <th>CÓDIGO</th>
                                    <th>Vereda</th>
                                    <th>Nombre finca</th>
                                    <th>ASNM</th>
                                    <th>Ha totales</th>
                                    <th>Ha en café</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var farm in Model)
                                {
                                    <tr>
                                        <td>@farm.Code</td>
                                        <td>@farm.Vereda</td>
                                        <td>@farm.NombreFinca</td>
                                        <td>@farm.HASL</td>
                                        <td>@farm.Ha_Totales</td>
                                        <td>@farm.Ha_Cafe</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
</div>


<script>
    function initMap() {
        const fincaLocation = { lat: 4.60971, lng: -74.08175 };

        const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 15,
            center: fincaLocation,
        });

        const marker = new google.maps.Marker({
            position: fincaLocation,
            map: map,
            title: "Ubicación de la Finca"
        });
    }
</script>